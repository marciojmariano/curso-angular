<!-- src/app/orcamento/cadastro-cliente/cadastro-cliente.component.html -->
<div>
  <h1>Cadastro de Clientes</h1>

  <!-- Formulário para cadastrar clientes -->
  <form [formGroup]="clienteForm" (ngSubmit)="salvarCliente()">
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input id="nome" type="text" formControlName="nome" placeholder="Digite o nome completo" />
      @if (clienteForm.get('nome')?.invalid && clienteForm.get('nome')?.touched) {
      @if (clienteForm.get('nome')?.errors?.['required']) {
      <small>O nome é obrigatório.</small>
      }
      @if (clienteForm.get('nome')?.errors?.['minlength']) {
      <small>O nome deve ter pelo menos 3 caracteres.</small>
      }
      }
    </div>

    <div class="form-group">
      <label for="dataNascimento">Data de Nascimento:</label>
      <input id="dataNascimento" type="date" formControlName="dataNascimento" />
    </div>

    <div class="form-group">
      <label for="celular">Celular:</label>
      <input id="celular" type="text" formControlName="celular" placeholder="(XX) XXXXX-XXXX" />
      <!-- Mensagens de validação para o campo celular -->
      @if (clienteForm.get('celular')?.invalid && clienteForm.get('celular')?.touched) {
      @if (clienteForm.get('celular')?.errors?.['required']) {
      <small>O celular é obrigatório.</small>
      }
      @if (clienteForm.get('celular')?.errors?.['pattern']) {
      <small>Formato de celular inválido. Use (XX) XXXXX-XXXX.</small>
      }
      }
    </div>

    <div class="form-group">
      <label for="email">E-mail:</label>
      <input id="email" type="email" formControlName="email" placeholder="Digite o e-mail" />
      @if (clienteForm.get('email')?.invalid && clienteForm.get('email')?.touched) {
      @if (clienteForm.get('email')?.errors?.['email']) {
      <small>E-mail inválido.</small>
      }
      }
    </div>

    <div class="form-group">
      <label for="endereco">Endereço:</label>
      <input id="endereco" type="text" formControlName="endereco" placeholder="Digite o endereço" />
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" formControlName="possuiRestricaoAlimentar" />
        Possui restrições alimentares?
      </label>
    </div>

    <div class="form-group">
      <label for="restricoesAlimentares">Restrições Alimentares:</label>
      <textarea id="restricoesAlimentares" formControlName="restricoesAlimentares"
        placeholder="Digite as restrições alimentares">
      </textarea>
    </div>
    <!-- Teste para identificar a renderização -->
    <!-- <pre>{{ clienteForm.value | json }}</pre> -->

    <button type="submit" [disabled]="clienteForm.invalid">Salvar Cliente</button>
  </form>
  <hr />

  <!-- Aqui é onde o componente filho é utilizado -->
  <!-- [clientes]="clientes" passa a lista de clientes do pai para o filho via @Input -->
  <!-- (clienteDeletado)="handleClienteDeletado($event)" ouve o evento do filho via @Output -->
  <app-consulta-clientes [clientes]="clientes" (clienteDeletado)="handleClienteDeletado($event)">
  </app-consulta-clientes>
</div>